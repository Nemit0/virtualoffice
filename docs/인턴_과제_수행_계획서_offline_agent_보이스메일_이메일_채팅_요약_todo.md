# 인턴 과제 수행 계획서

작성일: 2025-09-24  
작성자: AI사업부 인턴 김용준, 인턴 유준영  
멘토: AI개발2팀 강남구 수석/팀장

---

## 1. 배경 및 문제 정의
- 사내 메신저(KTOP PLUS)의 ‘Talk Bot’은 메일 알림과 미확인 표시를 제공하지만, 메시지/쪽지 알림의 통합 확인과 복귀 시 신속한 업무 재개에 한계가 있음.
- 자리비움(회의·외근·휴식·휴가 등) 사이에 축적된 알림으로 인해 복귀 시 많은 시간과 인지 부하가 발생.

## 2. 목표(Goals)
1) **오프라인 요약·정리**: 이메일·메시지·쪽지 알림을 통합 수집 → 중요도/긴급도 기반 요약 및 TODO 리스트 자동 생성.  
2) **초안 자동 작성**: 과거 발신 메일/파일시스템/템플릿을 인덱싱하여 회신 이메일 초안을 자동 생성하고 임시저장.  
3) **일일 리마인더/업무마감 보조**: 당일 수신 내역을 요약해 업무 마무리와 다음날 계획 수립을 지원.

## 3. 범위(스코프) 및 가정
- **우선 범위**: 이메일 중심 기능(수집→분류→요약→TODO→초안 임시저장)을 1차 목표로 함. 내부 채팅은 **더미 데이터** 및 시뮬레이션으로 검증.  
- **자리비움 중심 시나리오**를 기본으로 하되, 여력이 되면 **전일 전체 요약(온라인 포함)**으로 확장.  
- **보안/접근성**: 실제 KTOP API 직접 연동이 불가할 수 있어 사내 허용 범위 내 데이터 소스(IMAP/SMB 등)와 가상 시나리오로 우회 검증.

## 4. 산출물(Deliverables)
- 기능 데모 앱(Windows Native PyQt6) + FastAPI 백엔드(요약·초안·TODO API)  
- **요약 리포트 템플릿**(일일/부재기간별), **TODO 리스트 뷰**(우선순위·마감·소유자), **임시저장 이메일 초안**(본문/수신자/제목 제안)  
- **데이터/지식 인덱스**(FAISS·SQLite)와 **시뮬레이션 스크립트**(가상 부서·이벤트)  
- 운영 문서: 아키텍처/데이터 흐름/품질지표/테스트 시나리오/보안 가이드

## 5. 아키텍처 개요
- **클라이언트**: PyQt6 GUI(요약/리마인더/TODO/초안), Windows 네이티브.  
- **백엔드**: FastAPI(수집·분류·요약·초안 생성 API), 작업 큐(오프라인 배치), 인증/로그.  
- **LLM 계층**: 사내/클라우드 LLM 연결(프롬프트/시스템 가드레일), RAG(문맥 제공), 규칙 기반 보정.  
- **저장소**: SQLite(메타/상태), FAISS(임베딩 인덱스), 첨부/원문 파일 스토리지(SMB/로컬).  
- **시뮬레이션**: 더미 이메일/채팅 서버 + 가상 부서 스케줄러(1tick=1분), PM 모니터링 미니 보드.  
- **보안**: 온프렘 우선, 민감정보 마스킹, 링크/첨부 위험표식, 접근권한 레벨.

### 5.1 데이터 플로우(요약)
1) 수집: IMAP/SMB/더미-채팅 → 정규화(발신/수신/제목/본문/첨부/링크/타임스탬프/스레드ID)  
2) 전처리: 중복/RE: 스레드 머지, 스팸/규칙 필터, 엔티티 추출(사람·조직·날짜·액션), 링크 안전표식  
3) 분류: 라벨링(업무유형/우선순위/조치유형), 중요도 스코어링(규칙+ML)  
4) 요약: 역할·목표·마감·요청사항 중심 가이드 요약(자리비움/일일)  
5) TODO 생성: {액션, 담당, 마감, 근거링크, 중요도, 상태}  
6) 초안 생성: 관련 과거메일/파일 RAG → 본문 초안·제목·수신자 제안 → 임시저장  
7) 리마인더: 업무마감 시점 알림, 복귀 시 캐치업 카드 뷰

## 6. 핵심 기능 설계
- **중요도 산정(예)**: (마감 임박 가중치)×(직속/고위 발신자 가중치)×(수신유형: To/Cc)×(키워드 위험도)×(링크/첨부 존재)×(스레드 깊이)  
- **요약 프롬프트 가이드**: 요청사항·마감·필요자료·리스크·다음 단계 5줄 요약, 300–600자.  
- **TODO 규격**: `액션/담당/마감/근거(메일/채팅/파일 링크)/우선순위/상태`  
- **초안 작성**: 스레드 컨텍스트→RAG→템플릿(인사, 본문 TL;DR, 체크리스트, 첨부/링크 주의문)→임시저장  
- **리포트 템플릿**: ①자리비움 캐치업 ②일일 요약 ③주간 집계(건수, 평균 응답지연, 완료율)

### 6-1. 알림 중요도 Custom Instruction — 자연어 버전
다음 지침을 바탕으로 이메일/채팅 알림의 중요도를 판단하라. 먼저 **콘텐츠 자체**만 보고 LLM 기준으로 1차 등급( Low / Medium / High / Critical )을 판단하고, 이후 조직·팀·개인의 정책 문맥을 반영하여 최종 등급을 보정한다.

1) **마감**: 본문/제목에서 기한·일정·D-표기를 탐지하라. 4시간 미만은 Critical, 24시간 미만은 High, 72시간 미만은 High 또는 Medium 사이에서 맥락으로 결정한다. 명시적 기한이 없더라도 “오늘까지/긴급/즉시” 표현을 마감 신호로 본다.
2) **발신자/관계**: 임원·팀장·직속 상급자의 요청은 한 단계 상향하라. To 수신은 Cc보다 우선한다. 조직 보안/법무·준법 부서 발신은 하한을 High로 둔다.
3) **행동 요청성**: 수신자에게 **구체적 액션**(승인/결정/자료전달/검토/답변)이 요구되면 한 단계 상향한다.
4) **위험 키워드**: 보안사고/개인정보/계약/법적 이슈/장애·사고 등은 상향한다. 단, 공지성 FYI는 상향하지 않는다.
5) **채널·멘션**: 채팅 @mention, 회의 초대 등 직접 지목은 상향 신호다. 단순 단체방 잡담은 하향한다.
6) **스레드 깊이·잡음**: 5회 이상 장스레드에서 CC만 포함되고 새로운 액션이 없다면 한 단계 하향한다.
7) **첨부·링크**: 요구사항을 담은 문서/이슈 링크·첨부가 있을 경우 중요도를 유지하거나 상향한다. 악성 의심 링크는 별도 경고를 생성한다.
8) **사용자 상태**: 부재/휴가 중 도착한 ‘24시간 내 기한’은 복귀 시 상향 우선처리한다.
9) **동점규칙**: 마감 임박 > 직속 발신자 > 직접 수신(To) > 위험 키워드 순으로 결정한다.
10) **스누즈**: 액션이 없고 정보성(FYI)이며 마감도 없는 경우 Low로 분류하고 24시간 스누즈한다. 새로운 신호가 오면 즉시 해제한다.

### 6-1-β. 중요도 정책 — 표준 규격(파트별)
- **목적/범위**: 알림 triage 일관성 확보, 이메일/채팅 공통.
- **기본 판단**: LLM 1차 분류(평면) → 정책 보정(가중/강제 set/상·하한 cap).
- **가중치 축**: 마감, 발신자 역할, 수신 유형(To/Cc), 위험 키워드, 멘션/채널, 스레드 깊이, 첨부/링크, 사용자 상태.
- **예외/강제 규칙**: 법무·보안 이슈는 Critical로 set 가능. 임원 직통+To는 최소 High.
- **등급 정의**: Critical(즉시행동), High(당일 처리), Medium(주중 처리), Low(정보성).
- **운영/로깅**: 등급 근거(근거 문구/신호)와 보정 내역을 함께 기록. 주간 리그레션으로 임계값 재조정.
- **피드백 루프**: 사용자의 올림/내림 피드백을 수집해 규칙 가중치를 주간 반영.
- **충돌 해결**: 복수 규칙 히트 시 add 합산 후 set가 있으면 set 우선. guardrail cap 적용.
- **자동 스누즈**: Low & 무액션성 → 24h 스누즈, 신호 유입 시 해제.
### 6-2. 이메일 Draft Custom Instruction — 자연어 버전
너는 한국어(ko-KR) 기준의 **간결하고 공손한** 비서형 이메일 작성 도우미다. 동일 스레드 최근 대화와 과거 유사 메일을 참고하되, 사실 확인이 필요한 수치·날짜·금액·약속은 `[[확인필요: …]]`로 표시한다. 항상 상단에 1문장 **TL;DR**을 넣고, 본문에는 **요청/결과 요약 → 필요한 액션(담당/마감) → 참고(링크/첨부)** 순서로 쓴다. 제목은 상황에 따라 `[Action Required][D-n]`, `[FYI]`, `[Report]` 태그를 붙여 핵심 키워드와 프로젝트명을 포함한다. 수신(To)은 실행 책임자, Cc는 관련 이해관계자를 제안하되 PII 자동 채움은 금지한다. 불필요하게 화려한 서식을 피하고, 맞춤법과 용어집을 준수한다. 전송 전에는 **마감/담당/링크·첨부 유효성**을 점검하고, 필요한 경우 조직의 면책문을 덧붙인다.

### 6-2-β. Draft 정책 — 표준 규격(파트별)
- **언어/톤/형식**: ko-KR, concise-polite, Plain Text 기본(필요 시 Markdown), 과도한 서식 금지.
- **제목 규칙**: `[Action Required][D-n] {프로젝트}/{키워드} — {요청요약}` / `[FYI] …` / `[Report] …`.
- **본문 골격**: 인사 → TL;DR(1문장) → 요약 → 액션(담당/마감) → 참고(링크/첨부) → 맺음말/서명.
- **의도별 블록**: 일정조율(후보시간 2–3·타임존), 에스컬레이션(현황/리스크/요청결정), 사과·지연(원인/재발방지/새 일정).
- **수신자 제안**: To=책임자·초기 보낸이, Cc=PM·관련자, 금칙=개인주소 자동채움.
- **안전장치**: `[[확인필요: …]]` 마킹, 가짜 링크/첨부 경고, 민감정보 마스킹 검토.
- **교정/금칙**: 맞춤법·용어집, 과장된 확언·미확정 사실 서술 금지.
- **Preflight 체크**: 마감/담당 누락 경고, 링크/첨부 실재 확인, 제목 태그·D-배지 준수율.
- **로그/평가**: 초안→최종본 편집 델타, 전송까지 소요시간, 제목 규칙 준수율 수집.
## 7. 데이터 전략 및 시뮬레이션(더미데이터 세부화)
**목표**: 실제 사내 데이터를 쓰지 않고도, 중요도 정책(§6-1)과 Draft 정책(§6-2)의 효과를 **정량/정성**으로 검증할 수 있는 현실적 트레이스(이메일/채팅/상태/리포트)를 생성한다.

### 7-1. 시뮬레이션 엔진 개요
- 구성: **Email 서버**, **Chat 서버**, **Simulation Manager**, **에이전트(직원)**, **상태 저장소(SQLite)**.
- 실행: 1 tick = 1분, 기본 5영업일 시나리오. 각 tick에서 계획 실행→메시지 전송/수신→이벤트 주입→재계획→지표 업데이트. 
- 서비스는 FastAPI로 분리하되 개발 단계에서는 단일 프로세스로 구동 가능.

### 7-2. 데이터 모델(요약)
- people, projects, tasks, plans(시간대별 분단위 스텝), events(회의·휴가·고객 변경·장애), emails, chats, rooms, reports, metrics.

### 7-3. 페르소나 Seed(예시)
- **Manager(1)**: 의사결정/에스컬레이션/외부 커뮤니케이션 빈번.
- **IC(3–5)**: FullStack, UI/UX, DB/DevOps 등 역할별 스킬·성향·근무시간·휴식 패턴 포함.
- **레이아웃**: `seeds/people/*.json` 및 프로젝트 `seeds/projects/*.json`.

### 7-4. 프로젝트/작업 Seed(예시)
- 단순 웹사이트 프로젝트(랜딩 카피, Hero UI, Form 백엔드, DB 스키마 등)로 최소 작업 4개 이상. 의존성과 우선순위를 지정하여 재계획이 발생하도록 설계.

### 7-5. 이벤트 카탈로그 & 분포
- **계획 이벤트**: 일일 스탠드업(10:00/15분), 정기 리뷰.
- **비계획 이벤트**: 고객 변경요청(평균 하루 0.4회, 포아송), 갑작스런 결근(주 0.1회, 베르누이), 블로커(작업당 5–15% 확률), 긴급 이슈(주 0.2회).
- **상태 전이**: Working ↔ Away(식사/외근) ↔ OffDuty ↔ Overtime. Away 동안은 알림 적재 후 복귀 시 triage.

### 7-6. 메시지 생성 규칙(§6-1/§6-2 연동)
- **마감 신호 샘플**: 제목에 `D-1`, 본문에 “오늘 17시까지”, “즉시 확인 필요”.
- **발신자 가중**: 임원/팀장/직속 발신 시 To 지목 포함.
- **위험 키워드**: “보안사고”, “개인정보”, “계약 조항”, “장애 보고”.
- **스레드 길이**: 5회 이상 반복되는 FYI 체인 생성(하향 테스트용).
- **첨부/링크**: 명세서/PDF·이슈 트래커 링크 삽입(유효/무효 케이스 혼합).
- **채팅 멘션**: @userid 멘션과 단체방 공지 비율 조절.
- **Draft 검증용**: 일정조율/에스컬레이션/사과·지연/결과보고 의도별로 골격이 분명한 메시지 패턴 생성.

### 7-7. 샘플 페이로드(발췌)
```json
{"from":"manager@vdos.local","to":["fullstack@vdos.local"],"subject":"[Action Required][D-1] Alpha/폼 검증 규칙 확정","body":"TL;DR: 오늘 17시까지 검증 규칙 확정 필요.
- 요청: 클라이언트 변경 반영안 검토 및 결정
- 담당/마감: FullStack, 17:00
- 참고: 링크(이슈#42)"}
```
```json
{"from":"sec@vdos.local","to":["team@vdos.local"],"subject":"[FYI] 개인정보 로그 접근 점검","body":"주간 점검 결과 공유드립니다. 즉시 조치는 필요 없습니다."}
```

### 7-8. 실행 방법(요약)
1) 가상 서비스 구동(Email/Chat/Sim Manager).  
2) 페르소나·프로젝트 seed 로드.  
3) 시뮬레이션 시작(5일), 중간에 이벤트 주입(고객 변경/결근/블로커).  
4) 종료 후 **emails/chats/reports/metrics** 수집 → triage·Draft 품질 평가.

### 7-9. 관찰 지표
- 알림: 등급 분포, CI 히트율, 오판 사례 큐, 스누즈 비율, 평균 응답 지연.
- Draft: 제목 규칙 준수율, 편집 델타, 전송까지 시간, 링크/첨부 검증 실패율.
- 업무: 완료율, 블로커 평균 해소 시간, 재계획 빈도.

### 7-10. 수용 기준(요약)
- 1일 시뮬레이션에서 이메일≥20/이벤트≥3/리포트 생성.  
- 점심 Away 이후 복귀 triage가 발생하고 중요도 상향 사례가 기록됨.  
- Draft 템플릿 적용률≥90%, 마감·담당 누락 경고가 동작.
## 8. 구현 일정(WBS)
- **1주차(09/22–09/26)**: 요구사항 정제, 아키텍처/데이터모델 설계, PoC 스펙 고시.  
- **2주차(09/29–10/02)**: 더미 인프라(이메일·채팅·시뮬 관리자) 1차 구축.  
- **3주차(10/13–10/17)**: 더미 인프라 고도화 + PyQt 미니 모니터 디자인/구현.  
- **4주차(10/20–10/24)**: 분류/요약/TODO 1차 구현, 중요도 규칙 세트 v1.  
- **5주차(10/27–10/31)**: 인덱싱·이메일 초안·임시저장.  
- **6주차(11/03–11/07)**: GUI 통합·성능튜닝·사용성 개선.  
- **7주차(11/10–11/14)**: 품질검증(단기/장기 부재 시나리오)·버그픽스.  
- **8주차(11/17–11/21)**: 결과 정리·발표자료·데모 스크립트.

## 9. 품질/평가 계획
- **정확도**: 중요도 분류 F1, TODO 완결성(필드 누락률), 초안 채택률.  
- **효율**: 복귀 후 캐치업 시간 단축(베이스라인 대비 %), 요약 읽기 시간, 자동 작성 절감 시간.  
- **안전**: 민감정보 마스킹 적중률, 악성 링크 경고 적중률, 오탐률.  
- **시나리오 테스트**: 단기(회의/점심) vs 장기(휴가 5영업일) 케이스별 리포트 품질 비교.  

**CI/초안 정책별 추가 지표**
- **CI 히트율**: CI 규칙 적용 비율, 규칙별 Precision/Recall.  
- **오버라이드 기여도**: L0→L* 승격/강등 기여 분해(마감·발신자·키워드 등).  
- **오판 분석 큐**: 사용자 피드백(올림/내림) 라벨 축적→주별 리그레션 테스트.  
- **초안 편집 델타**: 사람 편집 글자수/문장수 변화율, 전송까지 소요시간.  
- **제목 명료도 점수**: 자동 규칙 준수율(태그·D-배지·키워드 포함률).


## 10. 리스크 및 대응
- **범위 팽창·지식그래프 난이도** → 이메일 중심 MVP 고정, 채팅은 더미/시뮬로 검증.  
- **맥락 손실/오판** → 스레드 통합, RE: 머지, 최근 N일 컨텍스트 버퍼, 규칙+LLM 하이브리드.  
- **보안/접근권한** → 온프렘 LLM·토큰 격리, PII 마스킹, 링크 안전표식, 접근등급.  
- **내부 시스템 연동 제약** → IMAP/SMB·가상 서버·수동 임포트로 우회, 추후 API 연동 옵션화.

## 11. 확장 항목(Nice-to-have)
- 전일/주간 요약 카드, 파일시스템 인덱싱 연동, KTOP 실연동 커넥터, 재순위(Re-ranking) 실험, 온프렘 LLM 최적화.

## 12. 예시: 이메일→TODO 변환 규칙(샘플)
- 제목/본문에서 **행동요청+기한** 탐지 → TODO 생성 `{담당:수신자, 마감:날짜, 근거:메일링크, 우선순위:High}`  
- 첨부/링크 존재 시 TODO 설명에 표시, 악성/의심 링크 경고 문구 첨부.

## 13. 운영·거버넌스
- **데이터 수명주기**: 원문 저장기간·임베딩 재생성 주기·삭제/익명화 절차.  
- **프롬프트·모델 거버넌스**: 버전, 테스트셋, 롤백 정책.  
- **관계자 커뮤니케이션**: 주간 스탠드업·중간점검(10/31)·최종발표(11/21).

**정책 관리(CI/초안)**
- 버전: `ci_priority@org/team/user`, `draft_prefs@org/team/user`를 GitOps로 관리, 변경 이력/검토 로그 보관.  
- 적용 순서: org→team→user 순으로 병합, 상충 시 뒤 우선, 단 조직 Guardrail 범위 내.  
- 승인 절차: 변경 PR→자동 테스트(룰 히트율/회귀)→담당 승인→배포.  
- 감사: 규칙 트리거·등급 변화·전송 전 경고 이력 감사 로그 유지(90일).

**API/설정(발췌)**
- `POST /policy/priority`(적용 미리보기 모드 포함), `GET /policy/priority/current`  
- `POST /draft/prefs`, `GET /draft/prefs`, `POST /draft/preview`  
- 관리자 UI: 규칙 편집기, 룰 테스트 샌드박스, 제목 규칙 시뮬레이터.

## 14. 고도화 계획: 개인 데이터 기반 Knowledge Graph + RAG
**목표**: 개인 데이터(파일시스템, 이메일, 캘린더/채팅 로그 등)로부터 **지식 그래프(KG)**를 자동 구축하고, 이를 벡터 검색과 결합한 **하이브리드 RAG**로 이메일/채팅 맥락을 풍부화하여 더 정확하고 근거 있는 요약·TODO·초안을 생성한다.

### 14-1. 데이터 소스 & 온보딩
- **파일시스템**: 로컬/SMB 경로 화이트리스트 방식(`~/Projects`, `~/Docs/Work`)으로 시작. 인덱싱 대상: `.txt, .md, .pdf(ocr), .docx, .xlsx, .pptx, .csv, .eml`. 비대상: `~/.ssh`, `~/Downloads`(옵션), `node_modules`, 대용량 바이너리.
- **이메일**: IMAP/Gmail API에서 **발신/수신/참조/스레드-ID/메시지-ID**와 본문/첨부 메타 수집. 동일 스레드 **중복 병합/버전 추적**.
- **캘린더(선택)**: 회의 제목·참석자·시간·링크→**Meeting 노드** 생성.
- **채팅(선택)**: 더미/플랫폼 로그를 **ChatMessage 노드**로 흡수. @mention/채널 정보 포함.
- **크롤 주기**: 최초 Full crawl → 변경 감지(inotify/mtime 해시)로 증분 인덱싱. 삭제/이동 대응(소프트 삭제·리링크).

### 14-2. 파서·전처리
- **추출**: 텍스트 추출기(파일 형식별), PDF OCR(한국어 폰트 포함). 이메일 인용 제거(`>` block, 이전 메일 헤더), 서명/광고 패턴 필터.
- **청킹**: 512–1024 토큰, 10–15% 오버랩. 표/코드 블록 보존. 이메일은 **헤더(사람/조직/시점) + 본문**을 분리 저장.
- **라벨링**: 문서유형(요구사항/설계/회의록/리포트/이슈/코드리뷰), 민감도(내부/대외/PII), 프로젝트 태그.

### 14-3. 엔티티·관계 도출(KG)
- **엔티티**: `Person, Team, Project, Artifact(File/Doc), Email, ChatMessage, Task, Requirement, Decision, Meeting, System(App/DB/Service)`
- **관계(예시)**:  
  `Email -sent_by-> Person`, `Email -to/cc-> Person`, `Email -about-> Project`,  
  `Artifact -belongs_to-> Project`, `Task -assigned_to-> Person`,  
  `Decision -decides-> Requirement`, `Meeting -discussed-> Task`,  
  `ChatMessage -mentions-> Person/Task`, `Artifact -version_of-> Artifact`.
- **기법**: NER+키프레이즈(한국어 포함) → 관계 추출(패턴+LLM 검증) → **신뢰도 점수**와 함께 저장.
- **저장소**: PoC는 SQLite(+NetworkX)로 시작, 확장 시 Neo4j/ArangoDB 등 **Property Graph**로 이관.

### 14-4. 인덱싱 & 검색
- **벡터 인덱스**: FAISS/HNSW. 문서·이메일 청크 임베딩.  
- **키워드 인덱스**: BM25(예: Elasticsearch/OpenSearch) 또는 SQLite FTS5.  
- **하이브리드 검색**: KG로 **주요 엔티티/프로젝트 근린 탐색** → 해당 근린에서 **벡터 k-NN** + **BM25** 동시 검색 → **RRF(Reciprocal Rank Fusion)**로 융합 → **Cross-Encoder 재랭킹**.
- **메타 재랭킹**: 최신성, 관계 강도(엣지 가중치), 작성자 친밀도, 민감도 패널티.

### 14-5. RAG 파이프라인(이메일/채팅 강화)
1) **의도 추론**: 요약/캐치업/초안/질의 등 구분.  
2) **질의 확장**: KG에서 관련 엔티티·프로젝트·최근 회의·담당자 확장.  
3) **하이브리드 검색**: 확장 쿼리로 벡터+BM25 실행, KG 근린 가중치 적용.  
4) **팩킹**: 출처/제목/작성자/날짜가 포함된 **Context Pack** 구성(토큰 한도 내 요약 압축).  
5) **생성**: 정책(§6-1/§6-2) 준수하여 답변·요약·초안을 생성.  
6) **근거 표기**: 각 문장 또는 단락에 **출처 앵커**(파일/이메일 링크) 제공.  
7) **보안 필터**: PII, 대외비 문자열, 금칙어 감시 → 필요 시 마스킹·경고.

### 14-6. 퍼스널라이제이션
- **관계 기반 가중**: 사용자가 자주 협업한 사람/프로젝트는 랭크 가중↑.  
- **선호 학습**: 사용자의 올림/내림 피드백으로 재랭킹 파라미터 미세조정.  
- **캐싱**: 자주 쓰는 컨텍스트팩(최근 7일 주요 아티팩트/스레드) 캐시.

### 14-7. 보안·프라이버시·거버넌스
- **동의·범위**: 사용자가 명시한 경로/메일 라벨만 인덱싱. 블랙리스트·패턴 제외(`*.key`, `secrets.*`).  
- **로컬 우선**: 기본은 오프라인/온프렘 처리, 원문 암호화 at-rest(AES-256), 전송 시 TLS.  
- **민감도 태깅**: 노드/엣지 단위 민감도 레벨→쿼리 시 마스킹/비노출.  
- **보존/삭제**: TTL/Legal hold, 영구 삭제 요청 이행.  
- **감사**: 조회·생성·내보내기 로그, 출처 추적(Who/When/What).

### 14-8. 성능·품질 평가
- **Retrieval**: Recall@k, nDCG, MRR(하이브리드/RRF/CE 전후).  
- **Faithfulness**: 근거 없는 서술 비율↓, 문장-근거 정합도↑.  
- **요약/초안 품질**: 편집 델타, 제목 규칙 준수율, 전송까지 시간.  
- **지연**: p95 검색<600ms(캐시 히트 시 <200ms), 컨텍스트팩 조립<400ms.  
- **프라이버시**: PII 유출 0건, 민감도 위반 0건.

### 14-9. 단계별 로드맵(예시)
- **P1(2주)**: 파일·이메일 추출/청킹/FAISS+FTS5, 간단 NER, 컨텍스트팩 생성.  
- **P2(3주)**: KG 스키마·관계 추출·하이브리드 검색·RRF·기본 대시보드.  
- **P3(3주)**: Cross-Encoder 재랭킹, 관계 가중·개인화, 근거 앵커 UI.  
- **P4(2주)**: 보안·감사·TTL, 관리 UI, 정책 A/B 및 피드백 루프.  
- **P5(옵션)**: Neo4j 이관, 캘린더/채팅 커넥터, 팀 단위 공유 워크스페이스.

### 14-10. 예시 컨텍스트팩(발췌)
```json
{
  "query": "Alpha 프로젝트 폼 검증 규칙 답장 초안",
  "entities": ["Project:Alpha", "Task:폼검증", "Person:김매니저"],
  "kg_paths": [
    "Email(2025-09-21) -about-> Project:Alpha",
    "Artifact:요구사항_v3 -belongs_to-> Project:Alpha"
  ],
  "vector_hits": [
    {"doc":"/Docs/Alpha/spec_v3.md#validation", "score": 0.83},
    {"email":"<msgid:abc@vdos>", "score": 0.79}
  ],
  "pack": [
    {"source":"spec_v3.md","snippet":"입력 필드별 검증 규칙 표…","link":"file:///…"},
    {"source":"email:abc@vdos","snippet":"오늘 17시까지 확정 요청…","link":"mailto:…"}
  ]
}
```

---

### 부록 A. 기술 스택
- Python, PyQt6, FastAPI, SQLite, FAISS, (옵션) Gmail API, (옵션) MCP/OpenCUA

### 부록 B. 테스트 체크리스트(발췌)
- [ ] 자리비움 2시간/8시간/5일 케이스 요약 품질  
- [ ] 중요도 스코어 기준치 회귀테스트  
- [ ] 초안 작성 후 임시저장/복원 동작  
- [ ] 악성 링크 경고·PII 마스킹 시나리오  
- [ ] GUI 응답성/에러 핸들링

### 부록 C. 문서 산출물 목록
- 아키텍처 다이어그램, 데이터 딕셔너리, 프롬프트 가이드, 테스트 시나리오, 운영 매뉴얼

